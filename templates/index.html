<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Neon Admin Panel">
    <meta name="author" content="">

    <title>首页</title>


    <link rel="stylesheet" href="/static/css/jquery-ui-1.10.3.custom.min.css">
    <link rel="stylesheet" href="/static/css/entypo.css">
    <link rel="stylesheet" href="/static/css/css.css">
    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/css/neon-core.css">
    <link rel="stylesheet" href="/static/css/neon-theme.css">
    <link rel="stylesheet" href="/static/css/neon-forms.css">
    <link rel="stylesheet" href="/static/css/custom.css">

    <script src="/static/js/jquery-1.11.0.min.js"></script>


    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>


</head>
<body class="page-body  page-left-in" data-url="http://neon.dev">

<div class="page-container">
    <!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->

    <div class="sidebar-menu">


        <header class="logo-env">

            <div class="logo">
                <a href="index.html">
                    <h3 style="color: #FFFFFF;font-weight: bold;margin-top: 5px">BOSS直聘可视化分析</h3>
                </a>
            </div>
        </header>


        <div class="sidebar-user-info">

            <div class="sui-normal">
                <a href="#" class="user-link">
                    <img style="width: 95%; border-radius: 50%" src="/media/{{ userInfo.avatar }}" width="120" alt="">

                    <span style="text-align: center; padding-top: 200px">Welcome</span>
                    <strong style="text-align: center; padding-top: 5px">{{ userInfo.username }}</strong>
                </a>
            </div>

        </div>


        <ul id="main-menu" class="">

            <li class="opened active">
                <a href="/myApp/home/">
                    <i class="entypo-gauge"></i>
                    <span>首页</span>
                </a>
            </li>
            <li>
                <a href="#">
                    <i class="entypo-user"></i>
                    <span>个人中心</span>
                </a>
                <ul>
                    <li>
                        <a href="/myApp/selfInfo/">
                            <span>个人信息</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/changePassword/">
                            <span>修改密码</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <i class="glyphicon glyphicon-th-large"></i>
                    <span>数据统计</span>
                </a>
                <ul>
                    <li>
                        <a href="/myApp/tableData/">
                            <span>数据总览</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/historyTableData/">
                            <span>历史查阅</span>
                        </a>
                    </li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <i class="glyphicon glyphicon-signal"></i>
                    <span>可视化图表</span>
                </a>
                <ul>
                    <li>
                        <a href="/myApp/salary/">
                            <span>薪资情况</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/company/">
                            <span>企业情况</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/companyTags/">
                            <span>福利词云</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/educational/">
                            <span>学历分布</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/companyStatus/">
                            <span>企业融资</span>
                        </a>
                    </li>
                    <li>
                        <a href="/myApp/address/">
                            <span>城市类型</span>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>

    </div>
    <div class="main-content">

        <div class="row" style="display: flex">

            <div style="margin-left: auto" class="col-md-6 col-sm-4 clearfix hidden-xs">

                <ul class="list-inline links-list pull-right">


                    <li>
                        <a href="/myApp/logOut/">
                            退出登录 <i class="entypo-logout right"></i>
                        </a>
                    </li>
                </ul>

            </div>

        </div>

        <hr>


        <div class="row">
            <div class="col-sm-12">
                <div class="well">
                    <h1>{{ dateInfo.month }}, {{ dateInfo.day }}, {{ dateInfo.year }}</h1>
                    <h3>Welcome to the site <strong>{{ userInfo.username }}</strong></h3>
                </div>
            </div>
        </div>

        <div class="row">

            <div class="col-sm-9">

                <div class="row">

                    <div class="col-sm-6">

                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="panel-title">用户创建时间饼状图</div>

                                <div class="panel-options">
                                    <a href="#sample-modal" data-toggle="modal" data-target="#sample-modal-dialog-1"
                                       class="bg"><i class="entypo-cog"></i></a>
                                    <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                                    <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                                </div>
                            </div>
                            <div class="panel-body">
                                <div id="main" style="width: 100%; height: 300px">

                                </div>
                            </div>
                        </div>

                    </div>

                    <div class="col-sm-6">

                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <div class="panel-title">最新用户信息</div>

                                <div class="panel-options">
                                    <a href="#sample-modal" data-toggle="modal" data-target="#sample-modal-dialog-1"
                                       class="bg"><i class="entypo-cog"></i></a>
                                    <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                                    <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                                </div>
                            </div>
                            <div class="panel-body" style="padding: 0">
                                <table class="table table-bordered" style="width: 100%;table-layout: fixed; margin: 0">
                                    <thead>
                                    <tr>
                                        <th style="width: 5%">#</th>
                                        <th style="width: 15%">用户名</th>
                                        <th style="width: 40%">密码(MD5)</th>
                                        <th style="width: 25%">创建时间</th>
                                        <th style="width: 15%">用户头像</th>
                                    </tr>
                                    </thead>

                                    <tbody>
                                    {% for u in top6User %}
                                        <tr>
                                            <td>{{ forloop.counter }}</td>
                                            <td>{{ u.username }}</td>
                                            <td style="word-wrap: break-word">
                                                <div class="text-truncate">
                                                    {{ u.password }}
                                                </div>
                                            </td>
                                            <td class="text-center">
                                                {{ u.createTime }}
                                            </td>
                                            <td class="text-center">
                                                <img class="image-circle" src="/media/{{ u.avatar }}" alt="" width="32">
                                            </td>
                                        </tr>
                                    {% endfor %}
                                    </tbody>
                                </table>
                            </div>

                        </div>

                    </div>

                </div>


                <div class="panel panel-default">
                    <div class="panel-heading">
                        <div class="panel-title">
                            <h4>
                                岗位数量动态分析
                            </h4>
                        </div>

                        <div class="panel-options">
                            <a href="#sample-modal" data-toggle="modal" data-target="#sample-modal-dialog-1" class="bg"><i
                                    class="entypo-cog"></i></a>
                            <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                            <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                        </div>
                    </div>

                    <div class="panel-body no-padding">
                        <div id="rickshaw-chart-demo-2">
                            <div id="bar" style="height: 300px"></div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-sm-3">
                <div class="tile-progress tile-red">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>{{ jobInfo.job_num }}</h3>
                        <span>数据总量统计</span>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="tile-progress tile-purple">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>{{ jobInfo.user_num }}</h3>
                        <span>用户数量统计</span>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="tile-progress tile-yellow">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>{{ jobInfo.top_education }}</h3>
                        <span>行业最高学历</span>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="tile-progress tile-green">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>{{ jobInfo.max_salary }}</h3>
                        <span>行业最高薪资</span>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="tile-progress tile-brown">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>{{ jobInfo.city }}</h3>
                        <span>优势城市</span>
                    </div>
                </div>
            </div>
            <div class="col-sm-3">
                <div class="tile-progress tile-orange">
                    <div class="tile-header" style="margin-bottom: 5px; padding-bottom: 10px">
                        <h3>正常岗位</h3>
                        <span>岗位性质</span>
                    </div>
                </div>
            </div>


        </div>


        <div class="row">
            <div class="col-sm-12">
                <div class="panel panel-default" data-collapsed="0">
                    <div class="panel-heading">
                        <div class="panel-title">数据表格</div>

                        <div class="panel-options">
                            <a href="#sample-modal" data-toggle="modal" data-target="#sample-modal-dialog-3" class="bg"><i
                                    class="entypo-cog"></i></a>
                            <a href="#" data-rel="collapse"><i class="entypo-down-open"></i></a>
                            <a href="#" data-rel="reload"><i class="entypo-arrows-ccw"></i></a>
                        </div>
                    </div>

                    <!-- panel body -->
                    <div class="panel-body" style="padding: 0">
                        <table class="table table-bordered" style="width: 100%;table-layout: fixed; margin: 0">
                            <thead>
                            <tr>
                                <th style="width: 5%">编号</th>
                                <th style="width: 10%">职位名称</th>
                                <th style="width: 5%">工作地点</th>
                                <th style="width: 8%">职位类型</th>
                                <th style="width: 5%">学历要求</th>
                                <th style="width: 5%">工作经验</th>
                                <th style="width: 15%">工作标签</th>
                                <th style="width: 8%">最高薪水</th>
                                <th style="width: 5%">年底多薪</th>
                                <th style="width: 5%">是否实习</th>
                                <th style="width: 5%">公司名称</th>
                                <th style="width: 25%">公司福利</th>
                                <th style="width: 5%">公司性质</th>
                                <th style="width: 5%">融资阶段</th>
                                <th style="width: 5%">公司人数</th>
                                <th style="width: 10%">跳转</th>
                            </tr>
                            </thead>
                            <tbody>
                            {% for j in jobs %}
                                <tr>
                                    <td>{{ j.id }}</td>
                                    <td>{{ j.title }}</td>
                                    <td style="word-wrap: break-word">
                                        <div class="text-truncate">
                                            {{ j.address }}
                                        </div>
                                    </td>
                                    <td>{{ j.jobType }}</td>
                                    <td>{{ j.educational }}</td>
                                    <td>{{ j.workExperience }}</td>
                                    <td style="word-wrap: break-word">
                                        <div class="text-truncate">
                                            {{ j.workTag }}
                                        </div>
                                    </td>
                                    <td>{{ j.salary.1 }}</td>
                                    <td>{{ j.salaryMonth }}</td>
                                    <td>
                                        {% if j.practice %}
                                            <span>是</span>
                                        {% else %}
                                            <span>否</span>
                                        {% endif %}
                                    </td>
                                    <td>{{ j.companyInfo.title }}</td>
                                    <td style="word-wrap: break-word">
                                        <div class="text-truncate">
                                            {{ j.companyInfo.companyTag }}
                                        </div>
                                    </td>
                                    <td>{{ j.companyInfo.nature }}</td>
                                    <td>{{ j.companyInfo.status }}</td>
                                    <td>{{ j.companyInfo.people.0 }}-{{ j.companyInfo.people.1 }}</td>
                                    <td>
                                        <p class="bs-example bs-baseline-top">
                                            <a href="{{ j.companyInfo.url }}"
                                               class="btn btn-primary btn-block">公司详情</a>
                                            <a href="{{ j.detailUrl }}" class="btn btn-blue btn-block">职位详情</a>
                                            <a href="/myApp/addHistory/{{ j.id }}" class="btn btn-success btn-block">添加历史</a>
                                        </p>
                                    </td>
                                </tr>
                            {% endfor %}
                            </tbody>

                        </table>
                        <div style="overflow: hidden; text-align: center">
                            <ul class="pager">
                                {% if pagination.has_previous %}
                                    <li>
                                        <a href="?page={{ pagination.current_page|add:-1 }}">
                                            <i class="entypo-left-thin"></i>上一页
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="disabled">
                                        <a href="javascript:void(0)">
                                            <i class="entypo-left-thin"></i>上一页
                                        </a>
                                    </li>
                                {% endif %}
                                <li class="disabled">
                                    <a href="#">
                                        第 {{ pagination.current_page }}/{{ pagination.total_pages }} 页
                                    </a>
                                </li>

                                {% if pagination.has_next %}
                                    <li>
                                        <a href="?page={{ pagination.current_page|add:1 }}">
                                            下一页<i class="entypo-right-thin"></i>
                                        </a>
                                    </li>
                                {% else %}
                                    <li class="disabled">
                                        <a href="javascript:void(0)">
                                            下一页<i class="entypo-right-thin"></i>
                                        </a>
                                    </li>
                                {% endif %}
                            </ul>
                        </div>

                    </div>

                </div>

            </div>
        </div><!-- Footer -->
        <footer class="main">


            Copyright &copy; 2025.BOSS直聘数据可视化分析.<a target="_blank" href="https://www.zhipin.com/">BOSS直聘</a>


        </footer>
    </div>


    
</div>



<link rel="stylesheet" href="/static/css/jquery-jvectormap-1.2.2.css">
<link rel="stylesheet" href="/static/css/rickshaw.min.css">

<!-- Bottom Scripts -->
<script src="/static/js/main-gsap.js"></script>
<script src="/static/js/jquery-ui-1.10.3.minimal.min.js"></script>
<script src="/static/js/bootstrap.js"></script>
<script src="/static/js/joinable.js"></script>
<script src="/static/js/resizeable.js"></script>
<script src="/static/js/neon-api.js"></script>
<script src="/static/js/jquery-jvectormap-1.2.2.min.js"></script>
<script src="/static/js/jquery-jvectormap-europe-merc-en.js"></script>
<script src="/static/js/jquery-jvectormap-world-mill-en.js"></script>
<script src="/static/js/jquery.sparkline.min.js"></script>
<script src="/static/js/d3.v3.js"></script>
<script src="/static/js/rickshaw.min.js"></script>
<script src="/static/js/neon-chat.js"></script>
<script src="/static/js/neon-custom.js"></script>
<script src="/static/js/neon-demo.js"></script>
<script src="/static/js/echarts.js"></script>
<script src="/static/js/echarts.min.js"></script>
<script>
    var chartDom = document.getElementById('main');
    var myChart = echarts.init(chartDom);
    var option;

    option = {
        tooltip: {
            trigger: 'item'
        },
        legend: {
            top: '5%',
            left: 'center'
        },
        series: [
            {
                name: 'Access From',
                type: 'pie',
                radius: ['40%', '70%'],
                avoidLabelOverlap: false,
                label: {
                    show: false,
                    position: 'center'
                },
                emphasis: {
                    label: {
                        show: true,
                        fontSize: 18,
                        fontWeight: 'bold'
                    }
                },
                labelLine: {
                    show: false
                },
                data: {{ userCreateDate|safe }}
            }
        ]
    };

    option && myChart.setOption(option);

</script>

<script>
    // 柱状图完整配置
    var barChartDom = document.getElementById('bar');
    var barChart = echarts.init(barChartDom);

    // 连接真实数据源
    const dateData = JSON.parse('{{ dateData|safe }}') || {
        dates: [],
        counts: []
    };
    let currentIndex = 0;

    // 三数据窗口函数
    function getTripleData() {
        const total = dateData.dates.length;
        if (total < 3) return dateData;
        // 柱子数
        return {
            dates: [
                dateData.dates[(currentIndex) % total],
                dateData.dates[(currentIndex + 1) % total],
                dateData.dates[(currentIndex + 2) % total],
                dateData.dates[(currentIndex + 3) % total],
                dateData.dates[(currentIndex + 4) % total]
            ],
            counts: [
                dateData.counts[(currentIndex) % total],
                dateData.counts[(currentIndex + 1) % total],
                dateData.counts[(currentIndex + 2) % total],
                dateData.counts[(currentIndex + 3) % total],
                dateData.counts[(currentIndex + 4) % total]
            ]
        };
    }

    // 渐变颜色配置
    const colorGradient = new echarts.graphic.LinearGradient(0, 0, 0, 1, [
        {offset: 0, color: '#83bff6'},
        {offset: 0.7, color: '#188df0'},
        {offset: 1, color: '#004b8d'}
    ]);

    // 完整配置项
    var barOption = {
        toolbox: {
            show: true,
            feature: {
                dataView: {show: true, readOnly: false},
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
        title: {
            text: '岗位数量动态分析',
            left: 'center'
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {type: 'shadow'}
        },
        xAxis: {
            type: 'category',
            name: '日期',
            data: getTripleData().dates
        },
        yAxis: {
            type: 'value',
            name: '岗位数量'
        },
        series: [{
            type: 'bar',
            data: getTripleData().counts,
            itemStyle: {
                color: colorGradient,
                borderRadius: [5, 5, 0, 0]
            },
            animationDuration: 1000,
            animationEasing: 'cubicOut'
        }],
        grid: {containLabel: true}
    };

    // 自动更新逻辑
    if (dateData.dates.length > 0) {
        setInterval(() => {
            currentIndex = (currentIndex + 1) % dateData.dates.length;
            barChart.setOption({
                xAxis: {data: getTripleData().dates},
                series: [{data: getTripleData().counts}]
            });
        }, 2000);
    }

    barChart.setOption(barOption);
</script>


</body>
</html>